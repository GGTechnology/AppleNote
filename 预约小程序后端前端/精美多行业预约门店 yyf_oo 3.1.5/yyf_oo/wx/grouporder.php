<?php
 goto KLRyD; Mq0Bb: $list = getList($uniacid, $openid, $status); goto Yynip; Md3lu: $data["\154\x69\x73\164"] = $list; goto N0e30; I5SyS: $oid = $_GPC["\x6f\x69\x64"]; goto VBt9D; mmQw1: UbF3R: goto Md3lu; Bwwj3: naVn_: goto Pmz1E; KLRyD: global $_GPC, $_W; goto c2wFc; MxGcJ: if (!$res) { goto BzFdv; } goto k_lJQ; hgJyC: foreach ($list as $key => $value) { goto kdyeX; s91A2: require_once $to_dir = MODULE_ROOT . "\57\160\x61\x79\57\x65\170\x61\155\x70\154\145\x2f\162\x65\146\165\156\x64\56\160\x68\160"; goto oX9Fp; j4X_n: ktJUA: goto jA2cS; u2e4g: if ($value["\155\157\144\145"] != 1) { goto Ro_nN; } goto Hv7xZ; Vb_aY: YsivS: goto TNsZa; Idy9u: $total = $value["\x74\x6f\x74\141\x6c"] * 100; goto VFMVg; zWFNu: goto YsivS; goto TX0fV; GsL75: kxlBY: goto TPQBL; VFMVg: $refund = $value["\x74\157\164\x61\x6c"] * 100; goto gq7WA; lmuv4: $id = $value["\x73\x69\x64"]; goto bkjWU; Hv7xZ: pdo_update("\x79\171\146\x5f\x6f\x6f\x5f\x75\x73\145\x72", array("\x6d\157\x6e\145\x79\x20\53\x3d" => $value["\x74\x6f\x74\141\154"]), array("\x6f\160\145\156\x69\144" => $openid, "\165\x6e\x69\x61\143\151\x64" => $uniacid)); goto wN9Pe; y16aO: Ro_nN: goto ZdRkt; P1Md7: $list[$key]["\163\x74\x61\164\165\x73\137\x73\x74\162"] = $this->orderStatus($value["\163\x74\141\x74\x75\x73"], $value["\141\162\162\x69\166\141\x6c"]); goto lmuv4; ZdRkt: $refundArr = pdo_get("\x79\171\x66\137\x6f\157\137\x73\171\x73\151\x6e\146\157", array("\165\x6e\151\141\143\x69\x64" => $uniacid), array("\x63\x65\162\164\x70\x65\x6d", "\153\x65\x79\x70\x65\x6d")); goto e9Wxw; gNBhv: pdo_update("\x79\171\x66\137\x6f\x6f\137\x6f\162\144\x65\x72", array("\x73\164\x61\164\x75\x73" => "\x34"), array("\x69\x64" => $value["\151\144"])); goto KYdCv; FF6Na: goto Hc8bZ; goto BcHmq; BcHmq: IYY3x: goto nnwCg; IGLR0: creatPay($uniacid); goto qnS7E; G6m11: if ($value["\163\164\x61\164\x75\x73"] == 0) { goto hgKV6; } goto tZ2rY; T_cR7: rRUI6: goto vNfa4; WLuH_: goto Hc8bZ; goto jlPpA; WKcG0: $list[$key]["\157\x76\x65\162\x74\151\x6d\x65\137\x73\164\141\x74\165\163"] = 1; goto gDMY_; HoN3x: if ($group["\163\164\x61\164\165\x73"] == 0) { goto ktJUA; } goto Vkrt6; BBpyB: $list[$key]["\x67\x72\157\x75\160\137\x73\x74\x72"] = "\346\234\252\xe6\210\x90\xe5\x9b\242\357\xbc\214\347\x82\271\345\x87\273\xe6\210\221\xe5\xbf\253\xe5\x8e\xbb\xe6\213\211\xe5\260\217\344\xbc\x99\344\274\xb4\345\x90\xa7"; goto NxoHB; uQZlh: if ($group["\163\164\141\x74\165\163"] == 1 && $value["\x73\164\141\x74\165\x73"] == 1) { goto kxlBY; } goto HoN3x; C5HSg: $ordersn = $value["\167\x65\x69\x64"]; goto Idy9u; oX9Fp: $res = refund($total, $ordersn, $refund); goto RYSVz; m0x8o: goto yQFzy; goto mPsx7; TX0fV: LlGk3: goto i0ifQ; mPsx7: K_BjC: goto dMaGG; BzHvi: goto P1Qty; goto y16aO; qgVb9: goto Hc8bZ; goto lJJzW; YheNs: Vh7U4: goto T_cR7; NxoHB: $overtime = $group["\163\164\141\162\164\164\x69\x6d\x65"] + $group["\x67\x72\157\165\160\164\151\x6d\x65"] * 60 * 60; goto jwIiG; lJJzW: E2v22: goto BBpyB; jwIiG: if (!($overtime - time() < 0)) { goto KN1I8; } goto WKcG0; TPQBL: $list[$key]["\x67\x72\157\165\x70\x5f\163\x74\x72"] = "\345\xb7\262\xe6\x88\x90\345\x9b\xa2"; goto b26h3; i0ifQ: if ($iscreat) { goto DRQ4a; } goto IGLR0; TmfLm: $list[$key]["\147\x72\157\165\160\x5f\163\x74\141\164\165\163"] = $group["\163\164\x61\164\165\x73"]; goto uQZlh; v6Stf: VvpHw: goto n4lNY; KyamJ: yQFzy: goto myy2t; wxRDv: $list[$key]["\147\162\x6f\x75\160\x5f\x73\x74\x72"] = "\xe5\267\xb2\344\275\277\347\x94\250"; goto WEVmU; nnwCg: $list[$key]["\147\162\x6f\165\x70\137\163\164\x72"] = "\345\267\262\xe9\x80\x80\xe6\254\276"; goto o1X8T; Cx74q: $list[$key]["\147\x72\x6f\165\160\x5f\163\x74\162"] = "\xe8\266\x85\xe5\207\272\346\234\211\xe6\x95\x88\xe6\x9c\x9f\x2d\346\xad\243\345\x9c\xa8\345\xa4\204\xe7\220\x86\xe9\200\200\346\254\276"; goto zWFNu; dMaGG: $list[$key]["\x73\150\x6f\160\156\x61\155\x65"] = pdo_getcolumn("\171\x79\x66\137\x6f\x6f\137\x73\x68\x6f\x70", array("\x69\x64" => $id), "\x6e\141\x6d\145"); goto KyamJ; G6K17: $group = pdo_get("\171\x79\146\x5f\x6f\x6f\x5f\x67\162\157\x75\x70", array("\x69\x64" => $gid), array("\x73\164\x61\x74\x75\x73", "\x67\162\x6f\x75\160\x74\x69\155\x65", "\x73\x74\141\x72\164\x74\151\155\x65")); goto TmfLm; gq7WA: require_once $to_dir = MODULE_ROOT . "\x2f\x70\x61\171\x2f\154\151\142\x2f\x57\170\120\x61\x79\x2e\x41\x70\x69\x2e\160\x68\160"; goto s91A2; bkjWU: if ($id) { goto K_BjC; } goto ZgyCr; Vkrt6: goto Vh7U4; goto GsL75; qnS7E: $iscreat = true; goto u9w15; gDMY_: if (!($value["\163\164\x61\x74\x75\163"] != "\64")) { goto VvpHw; } goto u2e4g; RYSVz: if (!($res["\x72\x65\164\165\162\x6e\x5f\155\163\147"] = "\163\165\143\143\145\163\x73")) { goto q1UeI; } goto gNBhv; ZgyCr: $list[$key]["\x73\x68\157\160\x6e\141\x6d\x65"] = "\346\227\240"; goto m0x8o; jlPpA: hgKV6: goto pE53G; TNsZa: P1Qty: goto v6Stf; b26h3: goto Vh7U4; goto j4X_n; u9w15: DRQ4a: goto C5HSg; o1X8T: goto Hc8bZ; goto SdT0R; kdyeX: $list[$key]["\x63\x6f\x6d\x65\164\x69\x6d\x65"] = date("\x6d\x2d\144\40\x48\x3a\151", $value["\x63\x6f\155\x65\x74\151\x6d\x65"]); goto P1Md7; wN9Pe: $list[$key]["\147\162\x6f\x75\160\137\x73\x74\x72"] = "\xe8\266\x85\345\x87\272\346\x9c\x89\346\x95\x88\346\x9c\237\x2d\345\xb7\xb2\351\200\200\346\xac\xbe"; goto BzHvi; myy2t: $gid = $value["\x67\x69\x64"]; goto G6K17; jA2cS: if ($value["\x73\x74\x61\x74\x75\163"] == 1 || $value["\x73\164\x61\x74\x75\163"] == 2) { goto E2v22; } goto G6m11; KYdCv: $list[$key]["\x67\x72\157\165\x70\x5f\163\164\x72"] = "\350\266\205\345\x87\272\346\234\211\xe6\x95\x88\xe6\234\237\x2d\xe5\xb7\262\xe9\x80\200\346\xac\xbe"; goto f6DjE; pE53G: $list[$key]["\147\x72\x6f\165\x70\x5f\x73\164\162"] = "\350\257\267\345\205\x88\346\224\xaf\xe4\273\230\xe8\256\xa2\xe5\x8d\225"; goto FF6Na; f6DjE: q1UeI: goto Vb_aY; e9Wxw: if ($refundArr["\x63\x65\x72\164\x70\x65\155"] != '' && $refundArr["\153\145\171\x70\145\155"] != '') { goto LlGk3; } goto Cx74q; n4lNY: KN1I8: goto WLuH_; WEVmU: Hc8bZ: goto YheNs; o1_56: if ($value["\x73\164\x61\x74\165\x73"] == 3) { goto nloYx; } goto qgVb9; tZ2rY: if ($value["\x73\164\x61\x74\165\163"] == 4) { goto IYY3x; } goto o1_56; SdT0R: nloYx: goto wxRDv; vNfa4: } goto mmQw1; Pmz1E: BzFdv: goto OuT4O; N0e30: $data["\150\151\144\x65\137\x70\x72\151\143\x65"] = pdo_getcolumn("\171\171\146\x5f\x6f\157\137\x73\171\x73\x69\156\146\157", array("\165\x6e\151\x61\x63\x69\144" => $uniacid), "\x68\151\144\x65\x5f\x70\162\151\143\145"); goto A8LbS; MAWmI: pdo_update("\x79\x79\146\x5f\x6f\157\137\165\163\145\x72\137\143\157\x75\x70\157\x6e", array("\x73\164\x61\164\165\163" => "\60"), array("\143\x69\x64" => $cid, "\157\x70\x65\156\x69\x64" => $openid)); goto Bwwj3; mwqh6: if (!$cid) { goto naVn_; } goto MAWmI; Wcsyb: $styleArr = pdo_get("\171\171\x66\137\x6f\x6f\x5f\163\164\x79\x6c\x65", array("\165\156\151\141\143\x69\x64" => $uniacid), array("\164\x63\x6f\154\x6f\x72", "\146\x6f\x6e\164\137\143\157\154\x6f\x72", "\x68\145\x61\144\137\x63\x6f\154\x6f\162")); goto CGDns; pxFkT: $openid = $_W["\x6f\x70\x65\156\x69\144"]; goto BWXRh; wPZFJ: $op = $_GPC["\157\x70"]; goto JFCTs; JFCTs: $message = "\350\277\x94\345\233\236\xe6\266\x88\xe6\201\xaf"; goto qDHFw; BWXRh: $status = $_GPC["\x73\x74\141\164\165\x73"]; goto wPZFJ; c2wFc: $uniacid = $_GPC["\165\x6e\x69\x61\x63\151\x64"]; goto pxFkT; z8tcD: return $this->result($errno, $message, $data); goto TqDxr; OuT4O: xL3Cm: goto Mq0Bb; BtoVM: function checkfile($filename, $content) { goto WnlRi; n8GCu: fclose($myfile); goto Z1tNK; dFYaC: fwrite($myfile, $content); goto n8GCu; WnlRi: $myfile = fopen($filename, "\x77"); goto dFYaC; Z1tNK: } goto DWoA3; JycGO: if (!($op == "\143\x61\156\x63\145\154")) { goto xL3Cm; } goto I5SyS; k_lJQ: $cid = pdo_getcolumn("\171\x79\x66\x5f\x6f\157\x5f\x6f\x72\x64\x65\x72", array("\165\156\x69\141\143\151\x64" => $uniacid, "\x6f\160\x65\x6e\151\x64" => $openid, "\157\151\144" => $oid), "\143\151\x64"); goto mwqh6; Yynip: $iscreat = false; goto hgJyC; A8LbS: $data["\x6d\165\154\x74\x69"] = pdo_getcolumn("\171\x79\x66\x5f\157\x6f\x5f\163\171\x73\x69\156\x66\x6f", array("\x75\156\151\141\x63\151\x64" => $uniacid), "\155\165\x6c\164\151"); goto Wcsyb; qDHFw: $errno = 0; goto JycGO; VBt9D: $res = pdo_update("\171\171\x66\x5f\157\x6f\x5f\x6f\x72\144\x65\x72", array("\x73\x74\x61\x74\x75\x73" => 3), array("\x75\x6e\x69\x61\143\151\144" => $uniacid, "\157\x70\x65\x6e\x69\144" => $openid, "\157\151\x64" => $oid)); goto MxGcJ; TqDxr: function creatPay($uniacid) { goto JtkIr; gpV7c: $mchid = $_W["\x61\143\143\x6f\165\156\x74"]["\x73\x65\164\164\151\x6e\147"]["\x70\x61\171\x6d\x65\x6e\164"]["\167\x65\143\150\x61\164"]["\155\143\150\151\144"]; goto Y1AF3; GSAP3: checkfile($config, $str); goto RlAGx; phIvz: $appid = $_W["\x61\143\143\157\x75\x6e\x74"]["\153\x65\171"]; goto zcRxU; uzZk0: $config = $dir . "\x2f\x6c\151\x62\x2f\127\170\x50\x61\171\x2e\x43\157\x6e\x66\x69\147\56\x70\x68\x70"; goto gpV7c; Y1AF3: $appkey = $_W["\141\x63\143\157\165\156\164"]["\x73\x65\x74\164\151\x6e\x67"]["\x70\x61\171\155\145\x6e\164"]["\167\145\x63\150\141\164"]["\163\151\147\156\x6b\145\171"]; goto phIvz; SdGz0: $dir = MODULE_ROOT . "\57\160\x61\x79"; goto iU8Nx; iU8Nx: $cert = $dir . "\57\x63\x65\162\x74\57\141\160\x69\143\154\x69\145\x6e\x74\137\143\145\x72\164\56\x70\x65\155"; goto NemsD; yttEu: checkfile($cert, $sysData["\x63\145\162\164\x70\x65\x6d"]); goto NEyCZ; NemsD: $key = $dir . "\57\143\x65\x72\164\x2f\x61\x70\x69\x63\154\x69\x65\156\164\x5f\x6b\145\x79\x2e\160\x65\x6d"; goto SCYSN; vjHyJ: $str = "\x3c\77\160\150\x70\x20\143\x6c\x61\163\x73\40\127\x78\x50\141\x79\x43\x6f\156\x66\151\x67\x7b\x63\157\x6e\163\164\x20\101\x50\x50\111\104\40\x3d\40\x27" . $appid . "\47\x3b\143\x6f\156\x73\x74\x20\x4d\x43\x48\111\x44\40\x3d\40\47" . $mchid . "\x27\x3b\x63\x6f\x6e\x73\x74\x20\x4b\105\131\x20\x3d\40\x27" . $appkey . "\47\73\x63\x6f\x6e\x73\x74\x20\101\120\x50\123\x45\103\x52\x45\x54\x20\x3d\40\47" . $appsecret . "\47\73\x63\x6f\x6e\x73\x74\40\123\x53\x4c\103\105\122\x54\x5f\x50\x41\124\110\x20\75\40\47" . $cert . "\x27\73\143\x6f\156\163\x74\40\123\123\114\113\105\x59\137\x50\101\x54\x48\x20\75\40\47" . $key . "\47\x3b\x63\157\156\163\x74\40\103\x55\x52\x4c\x5f\120\x52\x4f\130\x59\137\110\x4f\123\124\40\75\x20\47\x30\56\x30\56\x30\x2e\x30\47\73\143\x6f\x6e\163\164\x20\122\105\120\117\x52\x54\137\114\x45\126\x45\x4e\114\x20\75\40\61\x3b\175"; goto GSAP3; JtkIr: global $_W, $_GPC; goto SdGz0; zcRxU: $appsecret = $_W["\141\x63\x63\x6f\165\x6e\164"]["\163\x65\x63\x72\145\164"]; goto vjHyJ; SCYSN: $sysData = pdo_get("\x79\x79\x66\137\x6f\157\x5f\x73\171\x73\151\156\146\157", array("\165\x6e\151\141\x63\x69\144" => $uniacid), array("\143\x65\162\164\x70\x65\155", "\x6b\x65\x79\x70\x65\x6d")); goto yttEu; NEyCZ: checkfile($key, $sysData["\x6b\145\171\160\x65\155"]); goto uzZk0; RlAGx: } goto BtoVM; CGDns: $data["\163\164\x79\154\145\x61\162\x72"] = $styleArr; goto z8tcD; DWoA3: function getList($uniacid, $openid, $status) { goto RDlPl; RDlPl: if ($status != "\x31\60") { goto q7Je0; } goto TXmy5; iZND6: return $list; goto uPmDt; Kz7RS: $where .= "\x61\156\144\x20\140\163\x74\141\162\164\147\162\x6f\165\x70\140\x3d\47\x31\47"; goto Bw_da; P_yLP: Oauyu: goto Kz7RS; ZTY6y: $where = "\x61\156\144\x20\x60\x73\x74\x61\164\x75\163\140\40\x69\x6e\40\x28{$status}\51\x20"; goto P_yLP; FXeFL: goto Oauyu; goto Yer_c; Yer_c: q7Je0: goto ZTY6y; TXmy5: $where = "\141\156\x64\40\61\x3d\61\x20"; goto FXeFL; Bw_da: $list = pdo_fetchall("\123\x45\114\105\103\x54\x20\52\40\x46\122\117\115\40" . tablename("\171\x79\146\x5f\157\x6f\137\x6f\x72\144\145\162") . "\x20\167\x68\x65\x72\x65\40\x60\165\x6e\x69\141\x63\151\144\140\75\47{$uniacid}\47\40\x61\156\x64\x20\140\157\x70\145\156\x69\x64\x60\75\47{$openid}\47\x20{$where}\40\157\162\x64\x65\x72\40\142\171\40\141\144\144\164\x69\155\x65\x20\x64\x65\163\143\40\154\151\155\151\164\x20\x32\65"); goto iZND6; uPmDt: }