<?php
 goto ygQ3E; s2EB8: $errno = 0; goto wJ1x6; gOEPR: $data["\x69\155\147"] = tomedia("\151\x6d\141\147\145\163\x2f\171\171\146\x6f\157\x2f" . $haibao . "\56\160\x6e\147"); goto rpP_A; NaNOQ: function createImageFromFile($file) { goto wsF1K; wsF1K: if (preg_match("\57\150\x74\x74\160\50\163\51\77\x3a\134\x2f\x5c\x2f\x2f", $file)) { goto cMSiO; } goto wgTug; F9b5J: UVI24: goto tbsKc; tbsKc: switch ($fileSuffix) { case "\152\x70\x65\x67": $theImage = @imagecreatefromjpeg($file); goto Yd_Pw; case "\x6a\x70\x67": $theImage = @imagecreatefromjpeg($file); goto Yd_Pw; case "\x70\156\x67": $theImage = @imagecreatefrompng($file); goto Yd_Pw; case "\x67\151\146": $theImage = @imagecreatefromgif($file); goto Yd_Pw; default: $theImage = @imagecreatefromstring(file_get_contents($file)); goto Yd_Pw; } goto zt0Vv; ExBBm: Yd_Pw: goto Haiae; IRZ6B: if ($fileSuffix) { goto UVI24; } goto RHJjV; zt0Vv: CJVLN: goto ExBBm; Z6jD0: cMSiO: goto Jky7_; Haiae: return $theImage; goto peEMU; wgTug: $fileSuffix = pathinfo($file, PATHINFO_EXTENSION); goto vvdvT; Jky7_: $fileSuffix = getNetworkImgType($file); goto m9uUf; m9uUf: e0shU: goto IRZ6B; vvdvT: goto e0shU; goto Z6jD0; RHJjV: return false; goto F9b5J; peEMU: } goto znpXq; pAY5E: createSharePng($gData, $codeimg, ATTACHMENT_ROOT . "\x69\x6d\x61\147\x65\163\x2f\x79\x79\146\x6f\157\x2f" . $haibao . "\56\x70\x6e\x67", MODULE_ROOT . "\x2f\151\155\141\x67\145\x73"); goto gOEPR; cK6CF: $APPID = $_W["\141\143\143\157\165\156\x74"]["\x6b\145\171"]; goto s5h5N; uqobE: $scene = $id . "\x2d" . $sid; goto IoI5_; XAVWO: $sysData = pdo_get("\x79\x79\146\x5f\157\x6f\137\x69\164\x65\155", array("\151\144" => $id), array("\164\x69\x74\154\145", "\164\x68\165\x6d\142", "\x69\144")); goto s2EB8; wJ1x6: $message = ''; goto Vrpog; MfoCb: function mg_cn_substr($str, $len, $start = 0) { goto QotZD; chQRQ: $i += 2; goto ID23v; W0ak6: $a = 0; goto WazYj; WazYj: z_Av6: goto rYIDs; WUPOn: goto x77Fp; goto l8W18; xIogO: if (ord(substr($str, $i, 1)) > 0xa0) { goto tGfIq; } goto iATfX; tlX32: $start = $new_start; goto XsS9H; B5peq: if (!($start and json_encode(substr($str, $start, 1)) === false)) { goto CAnsf; } goto W0ak6; vZqm0: CAnsf: goto nsA47; Sq6Qw: goto NDAJa; goto e2_Mm; sRk2L: goto z_Av6; goto nvcYo; axEm2: $q_strlen = $start + $len > strlen($str) ? strlen($str) : $start + $len; goto B5peq; fObZj: x77Fp: goto dMwUM; EjOn7: return $q_str; goto vxsGu; sj9b9: VXfTC: goto sRtCc; OEWHB: $q_str .= substr($str, $i, 3); goto chQRQ; dMwUM: if (!($i < $q_strlen)) { goto U0xtS; } goto xIogO; XsS9H: goto t8oaf; goto sj9b9; l8W18: U0xtS: goto EjOn7; nsA47: $i = $start; goto fObZj; ID23v: NDAJa: goto TwNW5; iATfX: $q_str .= substr($str, $i, 1); goto Sq6Qw; TwNW5: FGCLo: goto to5Lb; SEu2V: $m_str = substr($str, $new_start, 3); goto n9smU; QotZD: $q_str = ''; goto axEm2; e2_Mm: tGfIq: goto OEWHB; sRtCc: EggjV: goto rremN; nvcYo: t8oaf: goto vZqm0; to5Lb: $i++; goto WUPOn; n9smU: if (!(json_encode($m_str) !== false)) { goto VXfTC; } goto tlX32; rYIDs: if (!($a < 3)) { goto t8oaf; } goto G1EOL; G1EOL: $new_start = $start + $a; goto SEu2V; rremN: $a++; goto sRk2L; vxsGu: } goto gA5Ow; XmiI7: $haibao = "\150\141\151\142\x61\x6f" . $sysData["\x69\x64"]; goto pAY5E; s5h5N: $SECRET = $_W["\141\x63\143\x6f\165\x6e\164"]["\x73\x65\x63\162\x65\164"]; goto vV4k9; rsA6y: $uniacid = $_GPC["\165\156\x69\141\143\151\x64"]; goto cK6CF; CE46F: cn0NK: goto bIA4r; wLhbo: $resultStr = json_decode(httpGet($url), true); goto jyNMq; Vrpog: $gData = ["\x70\x69\143" => tomedia($sysData["\164\150\x75\x6d\142"]), "\x74\151\x74\154\x65" => $sysData["\x74\151\x74\x6c\x65"]]; goto XmiI7; XxuWy: if (!$res) { goto rRuh9; } goto XAVWO; VelSy: $sid = $_GPC["\x73\151\144"]; goto b0n4q; rpP_A: return $this->result($errno, $message, $data["\x69\155\x67"]); goto U0lQc; bAyIK: mkdir($todir); goto CE46F; ygQ3E: global $_GPC, $_W; goto rsA6y; U0lQc: rRuh9: goto uNNuN; pjYOk: jwWCz: goto uqobE; H_3CD: die; goto pjYOk; vV4k9: $id = $_GPC["\151\144"]; goto VelSy; IoI5_: $token = $resultStr["\141\x63\x63\x65\x73\163\x5f\x74\157\x6b\145\156"]; goto ve1nb; ECgAF: return $this->result(1, "\xe5\xb0\217\347\250\x8b\345\xba\x8f\x53\x45\103\x52\x45\124\xe8\xae\xbe\347\275\256\351\224\x99\350\257\xaf"); goto H_3CD; b0n4q: $url = "\150\x74\x74\x70\x73\x3a\57\57\141\x70\x69\x2e\167\x65\151\170\151\x6e\x2e\161\x71\x2e\143\x6f\155\57\143\x67\151\55\x62\151\x6e\x2f\x74\157\153\145\x6e\77\x67\x72\x61\x6e\x74\137\x74\171\x70\x65\75\x63\x6c\151\x65\156\x74\137\x63\x72\145\144\145\x6e\x74\x69\x61\x6c\x26\141\x70\160\151\x64\75" . $APPID . "\46\163\x65\x63\x72\145\x74\x3d" . $SECRET; goto wLhbo; ve1nb: $post_data = array("\x73\x63\145\156\145" => $scene, "\x70\x61\164\x68" => "\x79\171\x66\137\157\157\57\x70\141\x67\x65\163\57\x69\x6e\144\x65\170\57\x69\x6e\144\x65\170", "\167\151\144\164\150" => "\62\70\x30", "\151\163\x5f\150\x79\x61\x6c\x69\x6e\145" => true); goto VQ1IG; cKz7j: $todir = ATTACHMENT_ROOT . "\x69\x6d\141\x67\145\x73\x2f\x79\x79\146\x6f\x6f\57"; goto eWpei; bIA4r: $codeimg = ATTACHMENT_ROOT . "\x69\155\141\147\145\163\x2f\171\171\146\157\x6f\x2f" . $openid . "\56\160\156\147"; goto lEPDH; jyNMq: if (!$resultStr["\145\x72\162\x63\157\144\145"]) { goto jwWCz; } goto ECgAF; eWpei: if (is_dir($todir)) { goto cn0NK; } goto bAyIK; Fx_F8: $result = postData($post_data, $url); goto cKz7j; VQ1IG: $url = "\150\164\164\160\x73\x3a\57\57\141\160\151\x2e\167\x65\x69\170\151\156\56\x71\x71\x2e\x63\x6f\155\x2f\167\170\x61\x2f\147\145\x74\x77\x78\x61\143\157\x64\145\165\x6e\154\151\155\151\x74\77\141\x63\143\x65\163\163\x5f\x74\157\x6b\145\x6e\75" . $token; goto Fx_F8; LKe9R: function cn_row_substr($str, $row = 1, $number = 10, $suffix = true) { goto XUP20; rNx8k: $result[$r] = mg_cn_substr($str, $oneRowNum, ($r - 1) * $oneRowNum); goto eB43I; vRaMj: goto wWV4k; goto zy8wX; xQnls: if ($str) { goto rSVEE; } goto ba9S2; ba9S2: return $result; goto J6F_I; B7lol: iXVLu: goto LWB9I; OZfMd: $str = trim($str); goto xQnls; S4W3B: $theStrlen = strlen($str); goto k9Kvh; k9Kvh: $oneRowNum = $number * 3; goto kUjsC; x7p_e: mIr8V: goto JERf0; aDR2G: SCQFq: goto JL5un; HEsui: $r = 1; goto KHC9n; z9IlM: $r++; goto vRaMj; g3PhV: if ($r == $row and $theStrlen > $r * $oneRowNum and $suffix) { goto h4jGI; } goto rNx8k; JL5un: if (!($r <= $row)) { goto iXVLu; } goto g3PhV; lqRv5: $r++; goto BFXrC; kUjsC: $r = 1; goto aDR2G; Qwb7c: h4jGI: goto XcB2k; XUP20: $result = array(); goto HEsui; W__4x: mtzUw: goto lqRv5; JERf0: if (!($theStrlen < $r * $oneRowNum)) { goto DKscu; } goto bwnIF; BFXrC: goto SCQFq; goto B7lol; eB43I: goto mIr8V; goto Qwb7c; bK9nw: DKscu: goto W__4x; XcB2k: $result[$r] = mg_cn_substr($str, $oneRowNum - 6, ($r - 1) * $oneRowNum) . "\56\56\56"; goto x7p_e; bwnIF: goto iXVLu; goto bK9nw; XxL8Y: if (!($r <= $row)) { goto g8M9l; } goto Zt8Ho; KHC9n: wWV4k: goto XxL8Y; e2MlJ: Drwu1: goto z9IlM; zy8wX: g8M9l: goto OZfMd; Zt8Ho: $result[$r] = ''; goto e2MlJ; J6F_I: rSVEE: goto S4W3B; LWB9I: return $result; goto nQLvc; nQLvc: } goto MfoCb; uNNuN: function createSharePng($gData, $codeName, $fileName = '', $sourceurl) { goto yQhWk; A0U3Q: $font_color_red = ImageColorAllocate($im, 217, 45, 32); goto wM7Ea; wH5W0: $codeImg = createImageFromFile($codeName); goto O29FR; dP1Ny: $font_file = $sourceurl . "\57\x53\x54\110\145\151\164\x69\x2d\x4c\x69\147\150\164\56\x74\x74\143"; goto zOaUJ; cEXuu: imagettftext($im, 16, 0, 8, 630, $font_color_red, $font_file, "\xe9\x95\277\346\214\x89\345\x9b\276\347\x89\207\350\xaf\x86\345\x88\253\xe4\272\214\347\273\264\347\240\201\345\x8d\xb3\345\x8f\257\xe8\277\x9b\345\x85\xa5"); goto U2rvI; aKTDu: $font_color_3 = ImageColorAllocate($im, 129, 129, 129); goto A0U3Q; SjcLw: imagefill($im, 0, 0, $color); goto dP1Ny; Zu_GF: Header("\x43\x6f\x6e\164\x65\x6e\x74\x2d\x54\171\x70\145\72\x20\151\x6d\x61\x67\145\57\160\x6e\147"); goto OjyAG; A2PT4: imagettftext($im, 16, 0, 8, 550, $font_color_2, $font_file, $theTitle[1]); goto yWmqA; zOaUJ: $font_color_1 = ImageColorAllocate($im, 140, 140, 140); goto jvqZD; rquL2: goto l3FQC; goto Gh6aV; O29FR: imagecopyresized($im, $codeImg, 440, 520, 0, 0, 170, 170, $code_w, $code_h); goto cPJ0m; ioo9e: list($g_w, $g_h) = getimagesize($gData["\160\151\143"]); goto VPwwh; aD55F: $color = imagecolorallocate($im, 255, 255, 255); goto SjcLw; cPJ0m: $theTitle = cn_row_substr($gData["\x74\x69\164\x6c\x65"], 2, 17); goto A2PT4; Gh6aV: hEINU: goto V1Qbw; jvqZD: $font_color_2 = ImageColorAllocate($im, 28, 28, 28); goto aKTDu; U2rvI: if ($fileName) { goto hEINU; } goto Zu_GF; yQhWk: $im = imagecreatetruecolor(618, 700); goto aD55F; VPwwh: $goodImg = createImageFromFile($gData["\x70\x69\x63"]); goto nMgCt; sYDcB: imagedestroy($codeImg); goto roUqF; ar3GM: imagedestroy($im); goto AI8Pe; AI8Pe: imagedestroy($goodImg); goto sYDcB; OjyAG: imagepng($im); goto rquL2; EReh8: l3FQC: goto ar3GM; wM7Ea: $fang_bg_color = ImageColorAllocate($im, 254, 216, 217); goto ioo9e; nMgCt: imagecopyresized($im, $goodImg, 0, 0, 0, 0, 618, 500, $g_w, $g_h); goto N9cAh; V1Qbw: imagepng($im, $fileName); goto EReh8; N9cAh: list($code_w, $code_h) = getimagesize($codeName); goto wH5W0; yWmqA: imagettftext($im, 16, 0, 8, 590, $font_color_2, $font_file, $theTitle[2]); goto cEXuu; roUqF: } goto NaNOQ; gA5Ow: function httpGet($url) { goto KtAdg; Eslap: curl_close($curl); goto m1rwl; NALNq: curl_setopt($curl, CURLOPT_TIMEOUT, 500); goto cpm5a; h43aD: curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); goto NALNq; cpm5a: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); goto Oc4_f; m1rwl: return $res; goto g3IGD; FP3dF: $res = curl_exec($curl); goto Eslap; Oc4_f: curl_setopt($curl, CURLOPT_URL, $url); goto FP3dF; KtAdg: $curl = curl_init(); goto h43aD; g3IGD: } goto VHpir; lEPDH: $res = file_put_contents($codeimg, $result); goto XxuWy; znpXq: function getNetworkImgType($url) { goto KZAKY; yZWZD: if ($http_code["\x68\164\164\x70\x5f\x63\x6f\x64\x65"] == 200) { goto QvnJf; } goto rCoGM; YZKPc: aiagJ: goto xMufF; lkjtM: $http_code = curl_getinfo($ch); goto Klj_B; o_IK2: $theImgType = explode("\57", $http_code["\x63\157\x6e\x74\145\156\x74\137\x74\171\160\x65"]); goto xB3Gb; KZAKY: $ch = curl_init(); goto ZCFFW; D8sV0: QvnJf: goto o_IK2; MzNOO: goto BAIRj; goto D8sV0; ZCFFW: curl_setopt($ch, CURLOPT_URL, $url); goto EZmbh; xB3Gb: if ($theImgType[0] == "\x69\x6d\141\x67\145") { goto aiagJ; } goto HFeYU; HFeYU: return false; goto T15Oa; t8k2r: curl_exec($ch); goto lkjtM; PnBZ0: BAIRj: goto ifAPz; yzSjB: curl_setopt($ch, CURLOPT_TIMEOUT, 3); goto joIx3; Klj_B: curl_close($ch); goto yZWZD; rCoGM: return false; goto MzNOO; T15Oa: goto i0VQ8; goto YZKPc; afeKl: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3); goto yzSjB; joIx3: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto t8k2r; EZmbh: curl_setopt($ch, CURLOPT_NOBODY, 1); goto afeKl; hSuC2: i0VQ8: goto PnBZ0; xMufF: return $theImgType[1]; goto hSuC2; ifAPz: } goto LKe9R; VHpir: function postData($post_data, $sendUrl) { goto nwLF5; MIaz3: $curl = curl_init(); goto hGyMY; zdAAf: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto Rs1h8; nwLF5: $post_data = json_encode($post_data); goto MIaz3; Bux2O: if (!curl_errno($curl)) { goto xQkLz; } goto Ag5HI; Ye3ae: xQkLz: goto Sqh52; oyi_i: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto STW7l; hGyMY: curl_setopt($curl, CURLOPT_URL, $sendUrl); goto Dw9uR; C71MY: return $result; goto mg8An; Rs1h8: curl_setopt($curl, CURLOPT_POST, 1); goto pwmh5; Dw9uR: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto zdAAf; Sqh52: curl_close($curl); goto C71MY; Ag5HI: return "\105\162\x72\156\157" . curl_error($curl); goto Ye3ae; STW7l: $result = curl_exec($curl); goto Bux2O; pwmh5: curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data); goto oyi_i; mg8An: }